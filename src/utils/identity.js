import { fetchReticulumAuthenticated } from "./phoenix-utils";
import defaultAvatar from "../assets/models/DefaultAvatar.glb";

const names = [
  "Авдей",
  "Авксентий",
  "Агапит",
  "Агафон",
  "Акакий",
  "Акиндин",
  "Александр",
  "Алексей",
  "Альберт",
  "Анатолий",
  "Андрей",
  "Аникий",
  "Аникита",
  "Антон",
  "Антонин",
  "Анфим",
  "Аристарх",
  "Аркадий",
  "Арсений",
  "Артём",
  "Артемий",
  "Артур",
  "Архипп",
  "Афанасий",
  "Богдан",
  "Борис",
  "Вавила",
  "Вадим",
  "Валентин",
  "Валерий",
  "Валерьян",
  "Варлам",
  "Варсонофий",
  "Варфоломей",
  "Василий",
  "Венедикт",
  "Вениамин",
  "Викентий",
  "Виктор",
  "Виссарион",
  "Виталий",
  "Владимир",
  "Владислав",
  "Владлен",
  "Влас",
  "Всеволод",
  "Вячеслав",
  "Гавриил",
  "Галактион",
  "Геласий",
  "Геннадий",
  "Георгий",
  "Герасим",
  "Герман",
  "Германн",
  "Глеб",
  "Гордей",
  "Григорий",
  "Данакт",
  "Даниил",
  "Демид",
  "Демьян",
  "Денис",
  "Дмитрий",
  "Добрыня",
  "Дорофей",
  "Евгений",
  "Евграф",
  "Евдоким",
  "Евсей",
  "Евстафий",
  "Егор",
  "Емельян",
  "Еремей",
  "Ермолай",
  "Ерофей",
  "Ефим",
  "Ефрем",
  "Ждан",
  "Зиновий",
  "Иакинф",
  "Иван",
  "Игнатий",
  "Игорь",
  "Изот",
  "Илья",
  "Иннокентий",
  "Ираклий",
  "Ириней",
  "Исаак ",
  "Исидор",
  "Иулиан",
  "Капитон",
  "Ким",
  "Кир ",
  "Кирилл",
  "Климент",
  "Конон",
  "Константин",
  "Корнилий",
  "Кузьма",
  "Куприян",
  "Лаврентий",
  "Леонид",
  "Леонтий",
  "Логгин",
  "Лука",
  "Лукий",
  "Лукьян",
  "Магистриан",
  "Макар",
  "Максим",
  "Марк",
  "Мартын",
  "Матвей",
  "Мелентий",
  "Митрофан",
  "Михаил",
  "Мстислав",
  "Назар",
  "Нестор",
  "Никандр",
  "Никанор",
  "Никита",
  "Никифор",
  "Николай",
  "Никон",
  "Олег",
  "Онисим",
  "Онуфрий",
  "Павел",
  "Паисий",
  "Панкратий",
  "Пантелеймон",
  "Парфений",
  "Пафнутий",
  "Пахомий",
  "Пётр",
  "Платон",
  "Порфирий",
  "Потап",
  "Пров",
  "Прокопий",
  "Протасий",
  "Прохор",
  "Разумник",
  "Родион",
  "Роман ",
  "Ростислав",
  "Руслан",
  "Савва",
  "Савелий",
  "Самуил",
  "Святополк",
  "Святослав",
  "Севастьян",
  "Семён",
  "Серафим",
  "Сергей",
  "Сильвестр",
  "Созон",
  "Софрон",
  "Спиридон",
  "Станислав",
  "Степан",
  "Тарас",
  "Тимофей",
  "Тимур",
  "Тит",
  "Тихон",
  "Трифон",
  "Трофим",
  "Фаддей",
  "Фёдор",
  "Федосей",
  "Федот",
  "Феликс",
  "Феоктист",
  "Филат",
  "Филимон",
  "Филипп",
  "Фирс",
  "Фока",
  "Фома",
  "Фотий",
  "Фрол",
  "Харитон",
  "Хрисанф",
  "Христофор"
];

function chooseRandom(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

export function generateRandomName() {
  return `${chooseRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;
}

export async function fetchRandomDefaultAvatarId() {
  const defaultAvatarEndpoint = "/api/v1/media/search?filter=default&source=avatar_listings";
  const defaultAvatars = (await fetchReticulumAuthenticated(defaultAvatarEndpoint)).entries || [];
  if (defaultAvatars.length === 0) {
    // If reticulum doesn't return any default avatars, just default to the duck model. This should only happen
    // when running against a fresh reticulum server, e.g. a local ret instance.
    return new URL(defaultAvatar, location.href).href;
  }
  const avatarIds = defaultAvatars.map(avatar => avatar.id);
  return chooseRandom(avatarIds);
}
